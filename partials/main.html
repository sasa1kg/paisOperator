<div class="container">
    <nav class="navbar navbar-default" ng-include="'partials/navigationBar.html'">
    </nav>

    <div class="alert alert-danger" ng-show="generalError">
        <a class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <strong>{{ 'ERROR_GEN' | translate }}</strong> {{ 'ERROR_GEN_DET' | translate }}
    </div>


    <div class="col-lg-4" ng-show="!generalError" cg-busy="{promise:getOrders,message:'Loading...',backdrop:true}">

        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">{{ 'ORDERS_ASSIGNED' | translate }} {{operator.company_name}}</h3>
            </div>
            <div class="panel-body">
                <ul class="list-group">
                    <a class="list-group-item hoverblue" ng-repeat="order in companyOrders"
                       ng-click="select(order.order_id, order.client_id)" id="{{order.order_id}}"
                       ng-class="{'active' : isActive(order.order_id, order.client_id)}">{{order.name}}</a>
                </ul>
            </div>
        </div>
    </div>

     <div class="col-lg-8 alert alert-danger" ng-show="companyOrders.length == 0">
        <strong>{{ 'NO_ORDERS' | translate }}</strong>
    </div>

        <div class="col-lg-8" ng-show="companyOrders.length > 0">
                            <a ng-show="selectedDetailed.status != 4"
                            class="pull-right btn btn-primary" href="#/uploadResults/{{selected.order_id}}/{{selected.client_id}}/">{{ 'COMMAND' | translate }}</a>
                            <div class="panel panel-primary map">
                                    <div class="panel-heading">
                                        <h4>{{selectedDetailed.name}}<h4>
                                    </div>
                                    <div class="panel-body" ng-show="!loaded">
                                        <p>{{ 'LOADING_ORDER_DETAILS' | translate }}</p>
                                       
                                    </div>
                                    <div class="panel-body" ng-show="loaded && selectedDetailed.status == 4">
                                        <p>{{ 'FINISHED_INFO' | translate }}</p>
                                       
                                    </div>
                                    <div class="panel-body" ng-show="loaded && selectedDetailed.status != 4">
                                        <div class="panel panel-default panelSmallBorderTop" ng-show="selectedDetailed.description.length > 0">
                                            <div class="panel-heading panelSmallTop">
                                                <p>{{ 'ORDER_DESC' | translate }}<p>
                                            </div>
                                            <div class="panel-body">
                                                {{selectedDetailed.description}}
                                            </div>
                                        </div>
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h5>{{ 'ORDER_BY' | translate }} {{selectedDetailedUser.first_name}} {{selectedDetailedUser.last_name}}<h5>
                                            </div>
                                            <div class="panel-body">
                                                <p>{{'USERNAME' | translate}}: {{selectedDetailedUser.user_name}}</p>
                                                <p>{{'EMAIL' | translate }}: {{selectedDetailedUser.email}}</p>
                                                <p>{{'COUNTRY' | translate }}: {{selectedDetailedUser.country_code}}</p>
                                                <p>{{'PHONE' | translate }}: {{selectedDetailedUser.phone}}</p>
                                            </div>
                                        </div>
                                        <div class="panel panel-default panelSmallBorderTop">
                                            <div class="panel-heading panelSmallTop">
                                                <p>{{ 'SERVICE_TIME' | translate }}<p>
                                            </div>
                                            <div class="panel-body">
                                                <p>{{ 'SERVICE_TIME_FROM' | translate }}:<p>
                                                <input ng-disabled="true" class="form-control" ng-model="selectedDetailed.start_date">
                                                <p>{{ 'SERVICE_TIME_TO' | translate }}:<p>
                                                <input ng-disabled="true" class="form-control" ng-model="selectedDetailed.end_date">
                                                <div ng-show="selectedDetailed.polygons.length > 0">
                                                <p>{{ 'SERVICE_TIME_FREQ' | translate }}</p>
                                                <input ng-disabled="true" class="form-control" ng-model="getFrequencyName(selectedDetailed.image_frequency_id)">
                                                <p>{{ 'SERVICE_TIME_IMAGES' | translate }}</p>
                                                <ul class="list-group">
                                                    <li class="list-group-item form-control" ng-repeat="imageType in selectedDetailed.imageTypes">{{imageType.image_type_name}}</li>
                                                </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <h4 ng-if="selectedDetailed.polygons.length>0">{{ 'IMAGES' | translate }}</h4>
                                        <div class="panel panel-default panelSmallBorder" ng-repeat="ter in selectedDetailed.polygons">
                                            <div class="panel-heading panelSmall">
                                                <h5>{{ 'TER_NAME' | translate }} {{ter.polygon_id}}<h5>
                                            </div>
                                            <div class="panel-body">
                                                <p>{{ 'ORDER_DESC' | translate }}: {{ter.description}}</p>
                                                <p>{{ 'TER_SUR' | translate }}: {{ter.surface}}</p>
                                                <table class="table table-bordered table-hover">
                                                    <thead>
                                                        <tr>
                                                            <th>{{ 'LAT' | translate }}</th>
                                                            <th>{{ 'LONGITUDE' | translate }}</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="coord in ter.coordinates">
                                                            <td>{{coord.latitude}}</td>
                                                            <td>{{coord.longitude}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <h4 ng-if="selectedDetailed.stations.length>0">{{ 'SENSOR_STATIONS' | translate }}</h4>
                                        <div class="panel panel-default panelSmallBorderSen" ng-repeat="station in selectedDetailed.stations">
                                            <div class="panel-heading panelSmallSen">
                                                <h5>{{'SENSOR_STATION' | translate}} {{station.station_id}} <a class="btn btn-primary pull-right pullbottom" ng-click="downloadSensorConf(station.station_id)"><span class="glyphicon glyphicon-import"></span> {{ 'DOWNLOAD_SEN_CONF' | translate }}</a><h5>
                                            </div>
                                            <div class="panel-body">
                                                <table class="table table-bordered table-hover table-responsive" ng-repeat="sen in station.sensors">
                                                    <thead>
                                                        <tr>
                                                            <th>{{'TYPE' | translate}}</th>
                                                            <th>{{'UOM' | translate}}</th>
                                                            <th>Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>{{getSensorTypeName(sen.type_id)}}</td>
                                                            <td>{{getUOMName(sen.uom_id)}}</td>
                                                            <td>
                                                                <span class="badge activeBadge" ng-show="sen.active==1">{{ 'ACT_SENS' | translate }}</span>
                                                                <span class="badge notActiveBadge" ng-show="sen.active==0">{{ 'INACT_SENS' | translate }}</span></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                         
                                    </div>
                            </div>
    </div>

</div>